<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>
      ÂµGrowthDB{% block title %}{% endblock %}
    </title>

    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" sizes="72x72">

    {% assets "app_css" %}
    <link rel="stylesheet" href="{{ ASSET_URL }}" type="text/css" media="screen" />
    {% endassets %}

    {% assets "app_js" %}
    <script src="{{ ASSET_URL }}" type="text/javascript"></script>
    {% endassets %}
  </head>

  <body>
    <aside id="page-sidebar" class="{{ 'open' if g.sidebar_open }}">
      <div class="close-sidebar-trigger">
        <a href="#">
          <img alt="Close sidebar" src="{{ url_for('static', filename='images/icons/chevrons-left.svg') }}" />
        </a>
      </div>

      <header>
        <img src="{{ url_for('static', filename='images/logo_sidebar3.png') }}" />
      </header>

      <nav>
        <ul class="nav-links">
          <li>
            <a href="{{ url_for('static_home_page') }}" class="home-link">
              <div class="emoji-icon">ğŸ </div>
              Home
            </a>
          </li>
          <li>
            <a href="{{ url_for('search_index_page') }}">
              <div class="emoji-icon">ğŸ”</div>
              Search
            </a>
          </li>
          <li>
            {% if 'compareData' in session and session['compareData'].get('contexts', [])|length > 0 %}
              {% set compareContexts = session['compareData']['contexts'] %}
            {% else: %}
              {% set compareContexts = [] %}
            {% endif %}

            {% if 'compareData' in session and session['compareData'].get('models', [])|length > 0 %}
              {% set compareModels = session['compareData']['models'] %}
            {% else: %}
              {% set compareModels = [] %}
            {% endif %}

            <a
                href="{{ url_for('comparison_show_page') }}"
                class="js-sidebar-compare"
                data-compare-context-ids='{{ compareContexts|join(',') }}'
                data-compare-model-ids='{{ compareModels|join(',') }}'>
              <div class="emoji-icon">â†”</div>
              Compare
              <span class="js-count count">
                {% if compareContexts|length > 0 or compareModels|length > 0: %}
                  ({{ compareContexts|length + compareModels|length }})
                {% endif %}
              </span>
            </a>
          </li>
          <li>
            {% if g.current_user: %}
              <a href="{{ url_for('user_show_page') }}">
                <div class="emoji-icon">ğŸ§‘â€ğŸ”¬</div>
                Profile
              </a>
            {% else: %}
              <a href="{{ url_for('user_login_page') }}">
                <div class="emoji-icon">ğŸ”</div>
                Log in
              </a>
            {% endif %}
          </li>
          <li>
            <a href="{{ url_for('upload_status_page') }}">
              <div class="emoji-icon">ğŸ“¤</div>
              Upload data
            </a>
          </li>
          <li>
            <a href="{{ url_for('help_index_page') }}">
              <div class="emoji-icon">â“</div>
              Help
            </a>
          </li>
          <li>
            <a href="{{ url_for('static_about_page') }}">
              <div class="emoji-icon">ğŸ¥¼</div>
              About us
            </a>
          </li>
          {% if g.current_user and g.current_user.isAdmin: %}
            <li>
              <a href="/admin/" style="border: 1px solid coral;">
                <div class="emoji-icon">ğŸ‘·</div>
                Admin
              </a>
            </li>
          {% endif %}
        </ul>
      </nav>
    </aside>

    <main id="main" class="{{ 'with-open-sidebar' if g.sidebar_open }}">
      <div class="open-sidebar-trigger {{ 'active' if not g.sidebar_open }}">
        <a href="#">
          <img alt="Open sidebar" src="{{ url_for('static', filename='images/icons/chevrons-right.svg') }}" />
        </a>
      </div>

      {% block content %}{% endblock %}
    </main>
  </body>
</html>
